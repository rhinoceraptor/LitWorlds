// Generated by CoffeeScript 1.7.1
(function() {
  var config, fs, http, io, net, server;

  io = require('socket.io');

  http = require('http');

  fs = require('fs');

  net = require('net');

  config = require('./config');

  server = http.createServer(function(req, res) {
    var fileName, path;
    path = req.url;
    switch (path) {
      case '/':
        console.log('connection!');
        fileName = __dirname + '/index.html';
        fs.readFile(fileName, function(err, text) {
          if (err) {
            console.log(err);
            res.writeHead(404);
            res.write('An error occured, try again later?');
            return res.end();
          } else {
            console.log('writing web page ' + __dirname + '/index.html');
            res.writeHead(200, {
              'Content-Type': 'text/html'
            });
            res.write(text);
            return res.end();
          }
        });
        break;
      default:
        res.writeHead(404);
        res.write('An error occured, try again later?');
        res.end();
    }
    res.end();
    return console.log('connection closed');
  });

  console.log('Starting web server at ' + config.webServer.url + ':' + config.webServer.port);

  server.listen(config.webServer.port, config.webServer.url);

}).call(this);
